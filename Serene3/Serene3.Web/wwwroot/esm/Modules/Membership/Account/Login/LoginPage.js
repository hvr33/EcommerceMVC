import{a as l,c as v}from"../../../../_chunks/chunk-YIODS4NN.js";import{a as n,h as m,i as o}from"../../../../_chunks/chunk-FHHVO6Y3.js";import{c as i,f as h,g as w}from"../../../../_chunks/chunk-RKUHNEJF.js";var e=h(w(),1);function y(a){var c=new d({element:"#LoginPanel"});a!=null&&a.activated&&(c.form.Username.value=a.activated,c.form.Password.element.getNode().focus())}i(y,"pageInit");var u=class u extends e.PropertyPanel{constructor(r){super(r);this.form=new l(this.idPrefix)}getFormKey(){return l.formKey}loginClick(){if(this.validateForm()){var r=this.getSaveEntity();(0,e.serviceCall)({url:(0,e.resolveUrl)("~/Account/Login"),request:r,onSuccess:i(()=>{this.redirectToReturnUrl()},"onSuccess"),onError:i(t=>{var s,f,g;if(((s=t==null?void 0:t.Error)==null?void 0:s.Code)==="RedirectUserTo"){window.location.href=t.Error.Arguments;return}if((g=(f=t==null?void 0:t.Error)==null?void 0:f.Message)!=null&&g.length){(0,e.notifyError)(t.Error.Message),this.form.Password.element.getNode().focus();return}e.ErrorHandling.showServiceError(t.Error)},"onError")})}}getReturnUrl(){var r=(0,e.parseQueryString)();return r.returnUrl||r.ReturnUrl}redirectToReturnUrl(){var r=this.getReturnUrl();if(r&&/^\//.test(r)){var t=window.location.hash;t!=null&&t!="#"&&(r+=t),window.location.href=r}else window.location.href=(0,e.resolveUrl)("~/")}renderContents(){let r=this.useIdPrefix();this.element.empty().append(o(m,{children:[o(v,{}),o("div",{class:"s-Panel p-4",children:[o("h5",{class:"text-center my-4",children:n.LoginToYourAccount}),o("form",{id:r.Form,action:"",children:[o("div",{id:r.PropertyGrid}),o("div",{class:"px-field",children:o("a",{class:"float-end text-decoration-none",href:(0,e.resolveUrl)("~/Account/ForgotPassword"),children:n.ForgotPassword})}),o("div",{class:"px-field",children:o("button",{id:r.LoginButton,type:"submit",class:"btn btn-primary my-3 w-100",onClick:t=>{t.preventDefault(),this.loginClick()},children:n.SignInButton})})]})]}),o("div",{class:"text-center mt-2",children:o("a",{class:"text-decoration-none",href:(0,e.resolveUrl)("~/Account/SignUp"),children:n.SignUpButton})})]}))}};i(u,"LoginPanel");var d=u;export{y as default};
//# sourceMappingURL=LoginPage.js.map
