<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>E-commerce</title>
    <meta name="description" content="">
    <meta name="keywords" content="">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="~/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="~/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="~/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="~/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
   
    <!-- Main CSS File -->
    <link href="~/assets/css/main.css" rel="stylesheet">
    <style>
        .search-container {
            position: relative;
            display: inline-block;
        }

        .search-input {
            padding-right: 40px; /* مساحة للأيقونة من جوة */
            border-radius: 20px;
            padding: 8px 15px;
            border: 1px solid #ccc;
            width: 200px;
            outline: none;
            height: 40px; /* ارتفاع ثابت */
            line-height: 40px;
        }

        .search-btn {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%); /* يرفع الأيقونة للنص بالظبط */
            color: #555;
            font-size: 18px;
            text-decoration: none;
            cursor: pointer;
        }

        .cart-toast {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #198754; /* لون Success */
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 2000;
            opacity: 0;
            transform: translate(-50%, -60%);
            transition: all 0.5s ease-in-out;
        }

            .cart-toast.show {
                opacity: 1;
                transform: translate(-50%, -50%);
            }




    </style>
    <!-- =======================================================
    * Template Name: Techie
    * Template URL: https://bootstrapmade.com/techie-free-skin-bootstrap-3/
    * Updated: Aug 07 2024 with Bootstrap v5.3.3
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->
    @* <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js" integrity="sha512-BkpSL20WETFylMrcirBahHfSnY++H2O1W+UnEEO4yNIl+jI2+zowyoGJpbtk6bx97fBXf++WJHSSK2MV4ghPcg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> *@
</head>

<body class="index-page">

  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <!-- Logo -->
      <a href="/Home/Index" class="logo d-flex align-items-center me-auto">
        <!-- <img src="~/assets/img/logo.png" alt="Logo"> -->
        <h1 class="sitename">myshop</h1>
      </a>

      <!-- Navigation -->
    @*   <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="/Home/Index" class="active">Home</a></li>
          <li><a href="/Home/cegtogray">Site Sections</a></li>
    
          <li><a href="#portfolio">Portfolio</a></li>
                    <li class="login-link">
                        <partial name="/Views/Shared/_LoginPartial.cshtml" />


                    </li> 


                    <!-- Search -->
                    <li class="search-link">
                        <form asp-action="productsearch" asp-controller="Home" method="get" class="search-container" id="search-form">
                            <input type="text" class="search-input" placeholder="Search..." name="xname" id="xname">

                            <!-- الايقونة كـ لينك -->
                            <a href="/Home/productsearch?xname=" id="search-link" class="search-btn">
                                <i class="bi bi-search search-icon"></i>
                            </a>
                        </form>
                    </li>


          <!-- Cart -->
         

          <!-- Login / Logout -->
                    @* <li>
                        @await Html.PartialAsync("/Views/Shared/_LoginPartial - Copy.cshtml", (object)Model)
                    </li> *@
                  

                  @*   <li class="cart-link">
                        <a href="/Home/cart" class="cart-icon">
                            <i class="bi bi-cart"></i>
                            <span class="cart-badge" id="cart-count">0</span>
                        </a>
                    </li>  *@

    @*     </ul>

        <!-- Mobile nav toggle -->
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div> *@ 
            <nav id="navmenu" class="navmenu">
                <ul>
                    <li><a href="/Home/Index" class="active">Home</a></li>
                    <li><a href="/Home/cegtogray">Site Sections</a></li>
                    <li><a href="#portfolio">Portfolio</a></li>

                    <!-- Login -->
                    

                    <!-- Search -->
                    <li class="search-link">
                        <form asp-action="productsearch" asp-controller="Home" method="get" class="search-container" id="search-form">
                            <input type="text" class="search-input" placeholder="Search..." name="xname" id="xname">
                            <a href="/Home/productsearch?xname=" id="search-link" class="search-btn">
                                <i class="bi bi-search search-icon"></i>
                            </a>
                        </form>
                    </li>
                  
                    <!-- Cart -->
                    <li class="cart-link">
                        <a href="/Home/cart" class="cart-icon">
                            <i class="bi bi-cart"></i>
                            <span class="cart-badge" id="cart-count">0</span>
                        </a>
                    </li>
                    <li class="login-link">
                        <partial name="/Views/Shared/_LoginPartial.cshtml" />
                    </li>

                </ul>
                
                <!-- Mobile nav toggle -->
                <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
            </nav>

          

  </header>
  <!-- End Header -->
    <main class="main mt-5">
        @RenderBody()
    </main>
    <!-- Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="cart-toast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    ✅ المنتج أُضيف إلى السلة
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

   


<footer id="footer" class="footer bg-dark text-light pt-5">

  <div class="container footer-top">
    <div class="row gy-4">

      <!-- About -->
      <div class="col-lg-4 col-md-12 footer-about">
        <a href="index.html" class="logo d-flex align-items-center mb-3 text-light text-decoration-none">
          <span class="sitename fw-bold">MyShop</span>
        </a>
        <p>Your one-stop shop for electronics, fashion, home essentials, and more. Enjoy great deals and fast delivery every day.</p>
        <div class="social-links d-flex mt-4 gap-3">
          <a href="#" class="text-light"><i class="bi bi-twitter-x"></i></a>
          <a href="#" class="text-light"><i class="bi bi-facebook"></i></a>
          <a href="#" class="text-light"><i class="bi bi-instagram"></i></a>
          <a href="#" class="text-light"><i class="bi bi-linkedin"></i></a>
        </div>
      </div>

      <!-- Useful Links -->
      <div class="col-lg-2 col-6 footer-links">
        <h5 class="fw-bold">Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="#" class="text-light text-decoration-none">Home</a></li>
          <li><a href="#" class="text-light text-decoration-none">About Us</a></li>
          <li><a href="#" class="text-light text-decoration-none">Shop</a></li>
          <li><a href="#" class="text-light text-decoration-none">FAQ</a></li>
          <li><a href="#" class="text-light text-decoration-none">Contact</a></li>
        </ul>
      </div>

      <!-- Services / Categories -->
      <div class="col-lg-2 col-6 footer-links">
        <h5 class="fw-bold">Categories</h5>
        <ul class="list-unstyled">
          <li><a href="#" class="text-light text-decoration-none">Electronics</a></li>
          <li><a href="#" class="text-light text-decoration-none">Fashion</a></li>
          <li><a href="#" class="text-light text-decoration-none">Home & Kitchen</a></li>
          <li><a href="#" class="text-light text-decoration-none">Beauty</a></li>
          <li><a href="#" class="text-light text-decoration-none">More...</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div class="col-lg-4 col-md-12 footer-contact text-center text-md-start">
        <h5 class="fw-bold">Contact Us</h5>
        <p>123 Market Street<br> New York, NY 10001<br> United States</p>
        <p class="mt-3"><strong>Phone:</strong> +1 234 567 890</p>
        <p><strong>Email:</strong> support@myshop.com</p>
      </div>

    </div>
  </div>

  <hr class="my-4 border-light">

  <!-- Bottom -->
  <div class="container copyright text-center mt-4">
    <p class="mb-0">© 2025 <strong class="sitename">MyShop</strong>. All Rights Reserved.</p>
    <div class="credits">
      Designed with ❤️ for a modern shopping experience
    </div>
  </div>

</footer>

    <!-- Scroll Top -->
    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Preloader -->
    <div id="preloader"></div>
    <script>
        // هذا ينقل حالة تسجيل الدخول من السيرفر للصفحة
        var isUserLoggedIn = @User.Identity.IsAuthenticated.ToString().ToLower();
    </script>

    <!-- Vendor JS Files -->
    <script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/vendor/php-email-form/validate.js"></script>
    <script src="~/assets/vendor/aos/aos.js"></script>
    <script src="~/assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="~/assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="~/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="~/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="~/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script>
           

                       document.querySelectorAll(".add-to-cart-btn").forEach(btn => {
            btn.addEventListener("click", function () {
                let productid = this.getAttribute("data-id");

                if (!isUserLoggedIn) {
                    alert("❌ يجب تسجيل الدخول لإضافة المنتج إلى السلة");
                    return; // توقف تنفيذ الإضافة
                }

                // المستخدم مسجل → أرسل POST لإضافة المنتج
                let token = document.querySelector('input[name="__RequestVerificationToken"]')?.value;

                fetch(`/Home/AddToCart/${productid}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: `__RequestVerificationToken=${token}`
                })
                .then(res => {
                    if (!res.ok) throw new Error("فشل إضافة المنتج");
                    return fetch("/Home/GetCart");
                })
                .then(res => res.json())
                .then(count => {
                    document.getElementById("cart-count").textContent = count;
                    let toastEl = document.getElementById("cart-toast");
                    let toast = new bootstrap.Toast(toastEl);
                    toast.show();
                })
                .catch(error => console.error("Error:", error));
            });
        });


        //     }

        //     function highlightStars(count) {
        //         stars.forEach((s, index) => {
        //             if (index < count) {
        //                 s.classList.remove('bi-star');
        //                 s.classList.add('bi-star-fill', 'text-warning'); لون أصفر
        //             } else {
        //                 s.classList.remove('bi-star-fill', 'text-warning');
        //                 s.classList.add('bi-star');
        //             }
        //         });
        //     }
        // });

           

    </script>



    <script src="~/assets/js/main.js"></script>

</body>

</html>

@await RenderSectionAsync("Scripts", required: false)